# 四海——校友地理信息互动平台

## 项目概述

本项目旨在构建一个以 "身份验证 + 2D 地理可视化" 为核心底座，融合空间定位与校友人脉资源的互动平台。通过对接校内数据与高德地图系列 API，解决 "真校友" 身份核验与 "精准找校友" 的核心痛点，同时挖掘空间维度下的校友圈层价值、资源匹配价值与场景化互动价值，最终实现 "线上精准匹配 - 线下高效连接" 的功能闭环，提升校友间的连接效率与平台粘性。

初步体验：http://106.55.101.34/ （腾讯云一个月免费试用版）

用户名：user
密码：123456

## 想法来源

在传统的校友平台中，校友之间的连接主要依赖于列表式的信息展示和搜索，缺乏空间维度的可视化和精准匹配。校友们往往难以找到地理位置相近、行业相关的校友进行线下交流和资源对接。

本项目的核心想法是将校友信息与地理空间数据结合，通过高德地图 API 实现校友分布的可视化展示，让校友们能够直观地看到身边的校友资源，从而促进更高效的线下连接和资源共享。

## 实现功能

### 核心底座功能

1. **校友身份可信验证体系**
   - 支持多种核验方式（校内统一身份认证 / 数字身份卡扫码 / 学号 + 姓名 + 毕业年份）
   - 自动生成唯一 "校友数字身份标识"
   - 自建数据库包含身份维度、空间维度和价值维度三大核心字段

2. **校友地理分布可视化**
   - 集成高德地图 JS API，支持海量点可视化、热力图、聚合点展示
   - 支持按院校、年级、专业、行业多维度组合筛选
   - 支持多级缩放，宏观看全国校友分布、中观查看城市级分布、微观查看区域级分布
   - 点位交互功能，点击聚合点/单点可查看校友列表和详情

3. **3D 地图可视化**
   - 基于高德 2D 地图渲染城市、园区、写字楼三维模型
   - 校友点位可标注在具体楼宇楼层
   - 支持 "学院→专业→年级" 三级联动筛选
   - 同专业/同学院校友聚集区以 "三维圈层" 高亮展示

4. **精准定位与校友匹配**
   - 支持自动定位和手动定位
   - 自动推荐 "5km 内" 的同校校友
   - 支持 POI 地点搜索和 "行业/职业标签 + 地理范围" 组合筛选

5. **校友线下场景导航**
   - 校友约见导航功能，支持步行、驾车、公共交通三种出行方式
   - 校友活动导航功能
   - 校友企业导航功能，支持周边停车场/餐饮检索

### 进阶场景功能

1. **校友圈层地图**
   - 行业圈层地图（金融圈、互联网圈等）
   - 创业圈层地图，标注校友初创公司位置
   - 地域圈层地图，包括海外校友地图
   - 校园圈层地图，支持返校校友实时位置标注

2. **校友动态的地理关联**
   - 动态地理关联功能，发布动态时可关联所在地点
   - 附近校友动态查看功能
   - 动态筛选功能，支持按地理范围、时间、类型组合筛选

3. **校友资源地理化匹配**
   - 资源发布地理关联功能
   - 智能资源匹配功能，根据用户当前位置推荐附近校友资源
   - 资源地图展示功能，按资源类型分类标注

### 创新玩法功能

1. **校友足迹地图**
   - 足迹记录与展示功能
   - 足迹匹配功能，查看与我有相同轨迹的校友
   - 足迹排行榜功能

2. **同城校友打卡/活动**
   - 打卡活动功能，定期发起同城校友打卡挑战
   - 线下拼局功能，支持附近校友拼咖啡/拼饭/拼运动
   - 活动签到功能，支持高德定位签到

3. **校友公益地理化**
   - 公益地图功能，标注校友发起或参与的公益项目地点
   - 公益组队功能，支持按地理位置组队参与公益
   - 公益足迹功能，记录校友参与公益的地理轨迹

### 实用辅助功能

1. **机会发布功能**
   - 校友创业者发布众筹项目/融资需求
   - 项目信息在地图上标注，支持联系创业者和分享项目

2. **同城路演功能**
   - 校友创投路演线下活动发布
   - 支持一键导航至路演地点和地理围栏签到
   - 路演项目在 3D 地图上集中展示

3. **隐私保护机制**
   - 位置展示粒度设置，用户可自主选择隐私级别
   - 地理围栏隐私保护
   - 临时授权功能，支持活动期间临时开放精准定位

## 技术栈

### 后端
- **框架**: Node.js + Express
- **数据库**: sql.js (SQLite)
- **身份验证**: JWT (JSON Web Tokens)
- **密码加密**: bcryptjs
- **数据验证**: zod
- **环境配置**: dotenv
- **跨域处理**: cors

### 前端
- **框架**: React 18 + TypeScript
- **构建工具**: Vite
- **地图服务**: 高德地图 JS API (@amap/amap-jsapi-loader) （需要填充在高德上申请的API）
- **路由**: react-router-dom
- **UI 图标**: lucide-react

### 地图 API
- 高德地图 JS API
- 高德定位 API
- 高德地理编码 API
- 高德路径规划 API
- 高德 POI 检索 API
- 高德海外地图 API

## 项目结构

```
Gaode/
├── server/                # 后端服务
│   ├── data/             # 数据库文件
│   ├── src/
│   │   ├── models/       # 数据模型
│   │   ├── routes/       # API 路由
│   │   ├── services/     # 业务逻辑服务
│   │   ├── utils/        # 工具函数
│   │   ├── db.js         # 数据库初始化
│   │   ├── index.js      # 后端入口
│   │   └── seed.js       # 种子数据
│   ├── .env              # 环境变量
│   ├── .env.example      # 环境变量示例
│   └── package.json      # 后端依赖
├── web/                  # 前端应用
│   ├── src/
│   │   ├── components/   # React 组件
│   │   ├── lib/          # 工具库
│   │   ├── pages/        # 页面组件
│   │   ├── App.tsx       # 应用入口
│   │   └── main.tsx      # React 挂载
│   ├── .env              # 环境变量
│   ├── index.html        # HTML 模板
│   └── package.json      # 前端依赖
└── 校友地理信息互动平台需求文档.md  # 需求文档
```

## 安装和运行

### 后端服务

1. **进入后端目录**
   ```bash
   cd server
   ```

2. **安装依赖**
   ```bash
   npm install
   ```

3. **配置环境变量**
   - 复制 `.env.example` 为 `.env`
   - 根据需要修改 `.env` 中的配置

4. **启动服务**
   ```bash
   npm run dev
   ```
   - 服务默认运行在 `http://localhost:3001`
   - 可通过环境变量 `PORT` 修改端口

5. **健康检查**
   ```bash
   curl http://localhost:3001/health
   ```
   - 正常返回: `{"ok": true}`

### 前端应用

1. **进入前端目录**
   ```bash
   cd web
   ```

2. **安装依赖**
   ```bash
   npm install
   ```

3. **配置环境变量**
   - 复制 `.env.example` 为 `.env`（如果存在）
   - 根据需要修改 `.env` 中的配置，特别是高德地图 API 密钥

4. **启动开发服务器**
   ```bash
   npm run dev
   ```
   - 开发服务器默认运行在 `http://localhost:5173`

5. **构建生产版本**
   ```bash
   npm run build
   ```
   - 构建产物将输出到 `dist` 目录

## API 端点

### 认证相关
- `POST /auth/register` - 用户注册
- `POST /auth/login` - 用户登录
- `POST /auth/verify` - 身份验证

### 校友相关
- `GET /alumni` - 获取校友列表
- `GET /alumni/:id` - 获取校友详情
- `PUT /alumni/:id` - 更新校友信息
- `GET /alumni/nearby` - 获取附近校友

### 活动相关
- `GET /events` - 获取活动列表
- `POST /events` - 创建活动
- `GET /events/:id` - 获取活动详情

### 资源相关
- `GET /resources` - 获取资源列表
- `POST /resources` - 创建资源
- `GET /resources/:id` - 获取资源详情

### 福利相关
- `GET /welfare` - 获取福利列表
- `POST /welfare` - 创建福利
- `GET /welfare/:id` - 获取福利详情

### 项目相关
- `GET /projects` - 获取项目列表
- `POST /projects` - 创建项目
- `GET /projects/:id` - 获取项目详情

## 开发流程

1. **后端开发**
   - 在 `server/src/routes/` 目录下添加新的路由
   - 在 `server/src/models/` 目录下定义数据模型
   - 在 `server/src/services/` 目录下实现业务逻辑

2. **前端开发**
   - 在 `web/src/pages/` 目录下添加新的页面
   - 在 `web/src/components/` 目录下封装可复用组件
   - 在 `web/src/lib/api.ts` 中定义 API 请求
   - 在 `web/src/lib/amap.ts` 中封装高德地图相关功能

3. **数据库操作**
   - 数据库初始化：`server/src/db.js`
   - 种子数据：`server/src/seed.js`
   - 重置数据库：运行 `node reset_db.js`
   - 检查数据库：运行 `node check_db.js`

## 环境变量配置

### 后端环境变量（.env）
```
PORT=3001
JWT_SECRET=your_jwt_secret
```

### 前端环境变量（.env）
```
VITE_AMAP_KEY=your_amap_js_api_key
VITE_API_BASE_URL=http://localhost:3001
```

## 高德地图 API 配置

1. 前往 [高德开放平台](https://lbs.amap.com/) 注册账号
2. 创建应用，获取 JS API 密钥
3. 将密钥配置到前端的 `.env` 文件中
4. 根据需要开通其他高德 API 服务

## 隐私与安全

- 严格遵循高德 API 隐私政策，用户位置信息需明确获取授权
- 平台不存储用户敏感定位数据，仅存储用户自主设置的常驻地/办公地
- 符合国家《个人信息保护法》要求，用户可随时查看、修改、删除个人信息与位置权限
- 支持账号注销，注销后所有数据永久删除


## 未来规划

1. 集成更多社交功能，如校友群聊、私信等
2. 优化 3D 地图性能，支持更复杂的场景渲染
3. 扩展更多行业和地域的校友圈层地图
4. 增强数据分析功能，提供校友分布趋势报告
5. 支持更多语言，服务全球校友

## 贡献指南

欢迎对本项目进行贡献！贡献方式包括：

1. 提交 Issue 报告 Bug 或建议新功能
2. 提交 Pull Request 修复 Bug 或实现新功能
3. 完善文档
4. 分享使用案例

**校友地理信息互动平台** - 连接全球校友，共享空间价值！
